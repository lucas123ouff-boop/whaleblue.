<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Whale Blue</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { background-color: #f8f9fa; }
  </style>
</head>
<body class="p-6">
  <div class="max-w-5xl mx-auto">
    <h1 class="text-3xl font-bold mb-6">üêã Whale Blue</h1>

    <!-- Escolher Dia da Semana -->
    <div class="mb-6 bg-white rounded-2xl shadow p-4">
      <h2 class="text-xl font-semibold mb-2">üìÖ Escolha o Dia da Semana</h2>
      <select id="diaSemana" class="w-full p-3 border rounded-lg">
        <option value="">Selecione...</option>
        <option value="segunda">Segunda-feira</option>
        <option value="terca">Ter√ßa-feira</option>
        <option value="quarta">Quarta-feira</option>
        <option value="quinta">Quinta-feira</option>
        <option value="sexta">Sexta-feira</option>
      </select>
    </div>

    <!-- Mat√©rias do Dia -->
    <div class="mb-6 bg-white rounded-2xl shadow p-4">
      <h2 class="text-xl font-semibold mb-2">üìñ Mat√©rias</h2>
      <input type="text" id="materiaInput" class="w-full p-2 border rounded-lg mb-3" placeholder="Adicione uma mat√©ria...">
      <button onclick="adicionarMateria()" class="px-4 py-2 bg-blue-600 text-white rounded-xl">Salvar Mat√©ria</button>
      <ul id="listaMaterias" class="mt-4 list-disc pl-5"></ul>
    </div>

    <!-- √Årea de Anota√ß√£o -->
    <div id="areaAnotacao" class="hidden mb-6 bg-white rounded-2xl shadow p-4">
      <h2 class="text-xl font-semibold mb-2">‚úçÔ∏è Suas Anota√ß√µes</h2>
      <textarea id="noteInput" rows="6" class="w-full p-3 border rounded-lg" placeholder="Escreva aqui suas anota√ß√µes..."></textarea>
      <button onclick="gerarPergunta()" class="mt-3 px-4 py-2 bg-blue-600 text-white rounded-xl">Gerar Pergunta</button>
    </div>

    <!-- Pergunta Gerada -->
    <div id="quizBox" class="hidden mb-6 bg-white rounded-2xl shadow p-4">
      <h2 class="text-xl font-semibold mb-2">‚ùì Pergunta</h2>
      <p id="questionText" class="mb-4"></p>
      <input type="text" id="answerInput" class="w-full p-2 border rounded-lg" placeholder="Sua resposta...">
      <button onclick="verificarResposta()" class="mt-3 px-4 py-2 bg-green-600 text-white rounded-xl">Responder</button>
    </div>

    <!-- Feedback -->
    <div id="feedback" class="hidden mb-6 p-4 rounded-xl"></div>
  </div>

  <script>
    let ultimaRespostaCorreta = "";
    let materias = JSON.parse(localStorage.getItem("materias")) || {
      segunda: [],
      terca: [],
      quarta: [],
      quinta: [],
      sexta: []
    };

    const diaSelect = document.getElementById("diaSemana");
    const listaMaterias = document.getElementById("listaMaterias");

    diaSelect.addEventListener("change", () => {
      mostrarMaterias();
      document.getElementById("areaAnotacao").classList.add("hidden");
    });

    function adicionarMateria() {
      const dia = diaSelect.value;
      const materia = document.getElementById("materiaInput").value.trim();
      if (!dia) {
        alert("Escolha um dia da semana primeiro!");
        return;
      }
      if (!materia) return;
      materias[dia].push(materia);
      localStorage.setItem("materias", JSON.stringify(materias));
      document.getElementById("materiaInput").value = "";
      mostrarMaterias();
    }

    function mostrarMaterias() {
      const dia = diaSelect.value;
      listaMaterias.innerHTML = "";
      if (!dia) return;
      materias[dia].forEach((m) => {
        const li = document.createElement("li");
        li.innerText = m;
        li.classList.add("cursor-pointer", "hover:text-blue-600");
        li.onclick = () => abrirAnotacao(m);
        listaMaterias.appendChild(li);
      });
    }

    function abrirAnotacao(materia) {
      document.getElementById("areaAnotacao").classList.remove("hidden");
      document.getElementById("noteInput").setAttribute("placeholder", `Anota√ß√µes de ${materia}...`);
    }

    function gerarPergunta() {
      const texto = document.getElementById("noteInput").value;
      if (!texto.trim()) {
        alert("Escreva algo primeiro!");
        return;
      }

      const frases = texto.split(/[.!?]/).filter(f => f.trim().length > 5);
      const escolhida = frases[Math.floor(Math.random() * frases.length)].trim();

      ultimaRespostaCorreta = escolhida;
      document.getElementById("questionText").innerText = `Explique: \"${escolhida}\"`;
      document.getElementById("quizBox").classList.remove("hidden");
      document.getElementById("feedback").classList.add("hidden");
      document.getElementById("answerInput").value = "";
      document.getElementById("answerInput").focus();
    }

    function verificarResposta() {
      const resposta = document.getElementById("answerInput").value.trim().toLowerCase();
      const correta = ultimaRespostaCorreta.toLowerCase();
      const feedbackBox = document.getElementById("feedback");

      if (resposta.includes(correta.substring(0, Math.min(10, correta.length)))) {
        feedbackBox.innerHTML = `<p class='text-green-700 font-semibold'>‚úÖ Correto! Muito bem.</p>`;
      } else {
        feedbackBox.innerHTML = `<p class='text-red-700 font-semibold'>‚ùå Errado! A resposta correta era:</p>
          <div class='mt-2 p-3 bg-gray-100 rounded-lg'>${ultimaRespostaCorreta}</div>`;
      }

      feedbackBox.classList.remove("hidden");
    }

    mostrarMaterias();
  </script>
</body>
</html>
